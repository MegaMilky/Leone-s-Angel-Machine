<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leonne's Angel Machine</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h1>Leonne's Angel Machine</h1>
            <p class="tagline">A digital codex of ritual, lore, and creative invention</p>
        </div>
        <a href="index.html" class="constellation-btn">
            <span class="icon">üåå</span>
            <span>Constellation View</span>
        </a>
        <nav class="folder-nav">
            <!-- Archetypes Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Archetypes</span>
                </div>
                <div class="folder-content">
                    <a href="view.html?file=Archetypes/Angels/Michael, The KlockWork Angel.md"
                        class="file-link">Michael, The KlockWork Angel</a>
                    <a href="view.html?file=Archetypes/Angels/Osiris, Arch Angel Of Omen.md" class="file-link">Osiris,
                        Arch Angel Of Omen</a>
                    <a href="view.html?file=Archetypes/Devils/Taylor, Devil of Desire.md" class="file-link">Taylor,
                        Devil of Desire</a>
                    <a href="view.html?file=Archetypes/Devils/He Who Remains.md" class="file-link">He Who Remains</a>
                    <a href="view.html?file=Archetypes/Devils/The Blind.md" class="file-link">The Blind</a>
                    <a href="view.html?file=Archetypes/Composite/Shadow-Demon-Providence.md"
                        class="file-link">Shadow-Demon-Providence</a>
                </div>
            </div>

            <!-- Philosophy Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Philosophy</span>
                </div>
                <div class="folder-content">
                    <a href="view.html?file=Philosophy/The Law.md" class="file-link">The Law</a>
                    <a href="view.html?file=Philosophy/The Law of the Void.md" class="file-link">The Law of the Void</a>
                    <a href="view.html?file=Philosophy/Khaos.md" class="file-link">Khaos</a>
                    <a href="view.html?file=Philosophy/Providence.md" class="file-link">Providence</a>
                    <a href="view.html?file=Philosophy/Amnesia.md" class="file-link">Amnesia</a>
                    <a href="view.html?file=Philosophy/Passion.md" class="file-link">Passion</a>
                    <a href="view.html?file=Philosophy/Patience.md" class="file-link">Patience</a>
                    <a href="view.html?file=Philosophy/Prophecy.md" class="file-link">Prophecy</a>
                    <a href="view.html?file=Philosophy/The Material.md" class="file-link">The Material</a>
                    <a href="view.html?file=Philosophy/There Are No Rules.md" class="file-link">There Are No Rules</a>
                    <a href="view.html?file=Philosophy/Guiding-Prompt.md" class="file-link">Guiding Prompt</a>
                </div>
            </div>

            <!-- Rituals Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Rituals</span>
                </div>
                <div class="folder-content">
                    <a href="view.html?file=Rituals/Deck of Fate.md" class="file-link">Deck of Fate</a>
                    <a href="view.html?file=Rituals/The Spells It Makes.md" class="file-link">The Spells It Makes</a>
                    <a href="view.html?file=Rituals/Angel Numbers.md" class="file-link">Angel Numbers</a>
                    <a href="view.html?file=Rituals/Counterspell-Playlist.md" class="file-link">Counterspell
                        Playlist</a>
                </div>
            </div>

            <!-- Guides Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Guides</span>
                </div>
                <div class="folder-content">
                    <a href="view.html?file=Guides/How To Use Bill Doors.md" class="file-link">How To Use Bill Doors</a>
                    <a href="view.html?file=Guides/Qualitative Research Guide.md" class="file-link">Qualitative Research
                        Guide</a>
                </div>
            </div>
            <!-- Orphans Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Orphans</span>
                </div>
                <div class="folder-content">
                    <a href="view.html?file=Orphans/OrphanIndex.md" class="file-link">üìã Orphan Index</a>
                    <a href="view.html?file=Orphans/AI Alignment Through Animism.md" class="file-link">AI Alignment
                        Through Animism</a>
                    <a href="view.html?file=Orphans/AI as Medium.md" class="file-link">AI as Medium</a>
                    <a href="view.html?file=Orphans/AI Creative Partners.md" class="file-link">AI Creative Partners</a>
                    <a href="view.html?file=Orphans/AI Faith and Ritual.md" class="file-link">AI Faith and Ritual</a>
                </div>
            </div>
            <!-- Providence Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Providence</span>
                </div>
                <div class="folder-content">
                    <a href="view.html?file=Providence/Angels.md" class="file-link">Angels</a>
                    <a href="view.html?file=Providence/Philosophy.md" class="file-link">Philosophy</a>
                    <a href="view.html?file=Providence/Rituals.md" class="file-link">Rituals</a>
                </div>
            </div>
            <!-- Structure Folder -->
            <div class="folder-item">
                <div class="folder-toggle">
                    <span class="folder-icon">üìÅ</span>
                    <span class="folder-name">Structure</span>
                </div>
                <div class="folder-content">
                    <a href="home.html" class="file-link">üìñ README</a>
                    <a href="full-index.html" class="file-link">üìã Full Index</a>
                </div>
            </div>
        </nav>
    </aside>
    <main class="main-content">
        <div id="content" class="markdown-content">
            <p style="text-align: center; margin-top: 100px; color: #888;">Loading...</p>
        </div>
    </main>
    <script src="navigation.js"></script>
    <script>
        // Get the file path from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const filePath = urlParams.get('file');
        function renderError(title, message) {
            document.getElementById('content').innerHTML = `
                <div class="markdown-content error-content" style="text-align: center; margin-top: 100px; color: #faa;">
                    <h1>${title}</h1>
                    <p>${message}</p>
                    <p><a href="index.html">Return to main page</a> or select a file from the sidebar.</p>
                </div>
            `;
        }
        if (filePath) {
            fetch(filePath).then(response => {
                if (!response.ok) throw new Error('File not found (404) or cannot be loaded.');
                return response.text();
            }).then(text => {
                document.getElementById('content').innerHTML = marked.parse(text);
                // Update page title
                const fileName = filePath.split('/').pop().replace('.md', '');
                document.title = fileName + ' - Leonne\'s Angel Machine';
            }).catch(error => {
                renderError('Error Loading File', `Could not load: <code>${filePath}</code><br>Error: ${error.message}`);
            });
        } else {
            renderError('No File Specified', 'Please select a file from the sidebar navigation.');
        }
    </script>
</body>

</html>